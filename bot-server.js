
const { Telegraf, Markup } = require('telegraf');

const BOT_TOKEN = process.env.BOT_TOKEN;
const APP_URL = process.env.APP_URL;

if (!BOT_TOKEN || !APP_URL) {
  console.error('ÐžÐ¨Ð˜Ð‘ÐšÐ: ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ BOT_TOKEN Ð¸Ð»Ð¸ APP_URL Ð½Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾ÐµÐ½Ñ‹!');
  process.exit(1);
}

const bot = new Telegraf(BOT_TOKEN);

bot.start((ctx) => {
  return ctx.reply(
    `âš¡ï¸ FEELME-BOT ÐÐšÐ¢Ð˜Ð’Ð˜Ð ÐžÐ’ÐÐ\n\nÐ¢Ð²Ð¾Ð¹ Ð°Ð²Ñ‚Ð¾Ð½Ð¾Ð¼Ð½Ñ‹Ð¹ Ð±Ð¸Ð¾Ñ…Ð°ÐºÐ¸Ð½Ð³-Ñ‚Ñ€ÐµÐºÐµÑ€ Ð³Ð¾Ñ‚Ð¾Ð² Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ðµ.\n\nÐ˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹ /help Ð´Ð»Ñ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð° Ð±Ð°Ð·Ñ‹ Ð·Ð½Ð°Ð½Ð¸Ð¹.`,
    Markup.inlineKeyboard([
      Markup.button.webApp('ðŸ§¬ Ð¢Ð•Ð ÐœÐ˜ÐÐÐ› FEELME', APP_URL)
    ])
  );
});

bot.command('zones', (ctx) => {
  ctx.reply(`ðŸ“Š Ð¦Ð’Ð•Ð¢ÐžÐ’Ð«Ð• Ð—ÐžÐÐ«:\n\nðŸŸ¢ Ð—Ð•Ð›Ð•ÐÐ«Ð™ (6-10): ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¾ÐºÑƒÑ. Ð’Ñ€ÐµÐ¼Ñ Ð´Ð»Ñ ÑÐ»Ð¾Ð¶Ð½Ñ‹Ñ… Ð·Ð°Ð´Ð°Ñ‡.\n\nðŸŸ¡ Ð–Ð•Ð›Ð¢Ð«Ð™ (4-5): Ð ÐµÐ¶Ð¸Ð¼ ÑÐºÐ¾Ð½Ð¾Ð¼Ð¸Ð¸. ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ Ð¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÑÑ‚Ð².\n\nðŸ”´ ÐšÐ ÐÐ¡ÐÐ«Ð™ (1-3): Ð ÐµÐ¶Ð¸Ð¼ Ð²Ñ‹Ð¶Ð¸Ð²Ð°Ð½Ð¸Ñ. Ð¢Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ñ‚Ð´Ñ‹Ñ… Ð¸ ÑÐ¾Ð½.`);
});

bot.command('principles', (ctx) => {
  ctx.reply(`ðŸ›¡ ÐŸÐ Ð˜ÐÐ¦Ð˜ÐŸÐ« FEELME:\n\n1. Ð¡Ð¾Ð½ â€” Ñ„ÑƒÐ½Ð´Ð°Ð¼ÐµÐ½Ñ‚ Ð²ÑÐµÐ³Ð¾.\n2. Ð”ÐµÐ±Ð°Ñ„Ñ„Ñ‹ Ð¾Ñ‚ÐºÐ°Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ Ñ‚ÐµÐ±Ñ Ð½Ð° 2 Ð´Ð½Ñ Ð½Ð°Ð·Ð°Ð´.\n3. ÐÐ°Ð¿Ð¾Ñ€ (Ð»Ð¸Ð±Ð¸Ð´Ð¾) â€” Ñ‚Ð²Ð¾Ð¹ Ð³Ð»Ð°Ð²Ð½Ñ‹Ð¹ Ð´Ð²Ð¸Ð³Ð°Ñ‚ÐµÐ»ÑŒ.`);
});

bot.command('params', (ctx) => {
  ctx.reply(`ðŸ§¬ ÐŸÐÐ ÐÐœÐ•Ð¢Ð Ð«:\n\nâ¤ï¸ Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ: Ð¤Ð¸Ð·Ð¸Ñ‡ÐµÑÐºÐ¸Ð¹ Ñ€ÐµÑÑƒÑ€Ñ.\nðŸŽ­ ÐÐ°ÑÑ‚Ñ€Ð¾ÐµÐ½Ð¸Ðµ: Ð­Ð¼Ð¾Ñ†Ð¸Ð¾Ð½Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ñ„Ð¾Ð½.\nðŸ§  Ð˜Ð½Ñ‚ÐµÐ»Ð»ÐµÐºÑ‚: ÐšÐ¾Ð³Ð½Ð¸Ñ‚Ð¸Ð²Ð½Ð°Ñ ÑÑÐ½Ð¾ÑÑ‚ÑŒ.\nâš¡ Ð­Ð½ÐµÑ€Ð³Ð¸Ñ: ÐžÐ±Ñ‰Ð¸Ð¹ Ð·Ð°Ð¿Ð°Ñ ÑÐ¸Ð».\nðŸŽ¯ ÐÐ°Ð¿Ð¾Ñ€: Ð’Ð¾Ð»Ñ Ðº Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸ÑŽ.`);
});

bot.command('buffs', (ctx) => {
  ctx.reply(`âš¡ï¸ Ð£Ð¡Ð˜Ð›Ð•ÐÐ˜Ð¯ (BUFFS):\n\nðŸ˜´ Ð¡Ð¾Ð½: Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ðµ Ð²ÑÐµÑ… ÑÐ¸ÑÑ‚ÐµÐ¼.\nðŸ’ª Ð¢Ñ€ÐµÐ½Ð¸Ñ€Ð¾Ð²ÐºÐ°: Ð’ÑÐ¿Ð»ÐµÑÐº Ð´Ð¾Ñ„Ð°Ð¼Ð¸Ð½Ð°.\nðŸ§Š Ð¥Ð¾Ð»Ð¾Ð´Ð½Ñ‹Ð¹ Ð´ÑƒÑˆ: Ð¨Ð¾Ðº-Ð¿ÐµÑ€ÐµÐ·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ°.\nðŸ§˜ Ð’Ð¾Ð·Ð´ÐµÑ€Ð¶Ð°Ð½Ð¸Ðµ: ÐÐ°ÐºÐ¾Ð¿Ð»ÐµÐ½Ð¸Ðµ Ð´Ñ€Ð°Ð¹Ð²Ð°.`);
});

bot.command('debuffs', (ctx) => {
  ctx.reply(`âš ï¸ ÐžÐ¡Ð›ÐÐ‘Ð›Ð•ÐÐ˜Ð¯ (DEBUFFS):\n\nðŸº ÐÐ»ÐºÐ¾Ð³Ð¾Ð»ÑŒ: Ð£Ð±Ð¸Ð²Ð°ÐµÑ‚ ÑÐ¾Ð½ Ð½Ð° 36Ñ‡.\nðŸŒ¿ ÐœÐ°Ñ€Ð¸Ñ…ÑƒÐ°Ð½Ð°: Ð¡Ð½Ð¸Ð¶Ð°ÐµÑ‚ Ð´Ð¾Ñ„Ð°Ð¼Ð¸Ð½ Ð½Ð° 48Ñ‡.\nðŸ”ž ÐœÐ°ÑÑ‚ÑƒÑ€Ð±Ð°Ñ†Ð¸Ñ: ÐœÐ³Ð½Ð¾Ð²ÐµÐ½Ð½Ñ‹Ð¹ ÑÐ»Ð¸Ð² Ñ€ÐµÑÑƒÑ€ÑÐ°.\nðŸ¥± ÐÐµÐ´Ð¾ÑÑ‹Ð¿: Ð”ÐµÐ³Ñ€Ð°Ð´Ð°Ñ†Ð¸Ñ Ð½Ð° Ð²ÐµÑÑŒ Ð´ÐµÐ½ÑŒ.`);
});

bot.help((ctx) => {
  ctx.reply(`ðŸ“– Ð‘ÐÐ—Ð Ð—ÐÐÐÐ˜Ð™:\n\n/zones â€” Ð¦Ð²ÐµÑ‚Ð¾Ð²Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹\n/principles â€” ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹\n/params â€” ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹\n/buffs â€” Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ñ\n/debuffs â€” ÐžÑÐ»Ð°Ð±Ð»ÐµÐ½Ð¸Ñ`);
});

bot.launch().then(() => {
  console.log('TMA Ð‘Ð¾Ñ‚ Ð·Ð°Ð¿ÑƒÑ‰ÐµÐ½!');
  bot.telegram.setMyCommands([
    { command: 'start', description: 'Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ Ñ‚ÐµÑ€Ð¼Ð¸Ð½Ð°Ð»' },
    { command: 'zones', description: 'Ð¦Ð²ÐµÑ‚Ð¾Ð²Ñ‹Ðµ Ð·Ð¾Ð½Ñ‹' },
    { command: 'principles', description: 'ÐŸÑ€Ð¸Ð½Ñ†Ð¸Ð¿Ñ‹' },
    { command: 'params', description: 'ÐŸÐ°Ñ€Ð°Ð¼ÐµÑ‚Ñ€Ñ‹' },
    { command: 'buffs', description: 'Ð£ÑÐ¸Ð»ÐµÐ½Ð¸Ñ' },
    { command: 'debuffs', description: 'ÐžÑÐ»Ð°Ð±Ð»ÐµÐ½Ð¸Ñ' },
    { command: 'help', description: 'ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ' }
  ]);
});

const http = require('http');
const server = http.createServer((req, res) => {
  res.writeHead(200);
  res.end('Bot is running');
});
server.listen(process.env.PORT || 3000);

process.once('SIGINT', () => bot.stop('SIGINT'));
process.once('SIGTERM', () => bot.stop('SIGTERM'));
